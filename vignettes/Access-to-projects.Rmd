---
title: "Access to projects"
author: "Damiano Oldoni"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  message = FALSE,
  warning = FALSE,
  comment = "#>"
)
```

Many functions of the `etn` package accept project-related parameters like `animal_project` and `network_project`. In the ETN database there are two fields to identify a project, namely `projectcode` and `projectname`:

```{r show_name_and_code}
library(etn)
my_con <- connect_to_etn(Sys.getenv("userid"),
                         Sys.getenv("pwd"))
projects <- get_animals(my_con)
grep("project", colnames(projects), value=TRUE) # print projects*** columns
```

So, which one should you use it? The answer is: `projectcode`.

With an animal project:

```{r example_projectcode1}
library(dplyr)
animals <- get_animals(my_con, animal_project = "2012_leopoldkanaal")
animals %>% distinct(projectcode) %>% pull()
animals %>% distinct(projectname) %>% pull()
```

With a network project:

```{r example_projectcode2}
animals <- get_animals(my_con, network_project = "thornton")
animals %>% distinct(projectcode) %>% pull()
animals %>% distinct(projectname) %>% pull()
```

The are many reasons for using the code of a project instead of its name. Project codes are typically shorter, therefore faster to write, while project names are longer and more informative. The presence of spaces in the project names can also easily lead to typos.

## How to find a project code

What if you have no clue about the project code you are interested in?

Run `get_projects()`:

```{r couple_projectcode_to_projectname, eval = FALSE}
get_projects(my_con) %>% select(name, projectcode)
```

```{r couple_projectcode_to_projectname_short, echo = FALSE}
get_projects(my_con) %>% 
  select(name, projectcode) %>%
  head(n = 10) %>%  # print 10 first
  knitr::kable()
```

Finally, please notice that neither project names nor project codes are unique as shown in the case of project `"ARAISOLA01"`:

```{r not_uniqueness_example}
get_projects(my_con) %>%
  filter(name == "ARAISOLA01") %>%
  knitr::kable() 
```
