<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Explore acoustic telemetry data • etn</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Explore acoustic telemetry data">
<meta property="og:description" content="etn">
<meta property="og:image" content="https://inbo.github.io/etn/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">etn</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/acoustic_telemetry.html">Explore acoustic telemetry data</a>
    </li>
    <li>
      <a href="../articles/etn_fields.html">ETN field definitions</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/inbo/etn/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="acoustic_telemetry_files/htmlwidgets-1.5.3/htmlwidgets.js"></script><script src="acoustic_telemetry_files/jquery-1.12.4/jquery.min.js"></script><link href="acoustic_telemetry_files/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="acoustic_telemetry_files/leaflet-1.3.1/leaflet.js"></script><link href="acoustic_telemetry_files/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="acoustic_telemetry_files/proj4-2.6.2/proj4.min.js"></script><script src="acoustic_telemetry_files/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="acoustic_telemetry_files/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="acoustic_telemetry_files/leaflet-binding-2.0.4.1/leaflet.js"></script><link href="acoustic_telemetry_files/leaflet-markercluster-1.0.5/MarkerCluster.css" rel="stylesheet">
<link href="acoustic_telemetry_files/leaflet-markercluster-1.0.5/MarkerCluster.Default.css" rel="stylesheet">
<script src="acoustic_telemetry_files/leaflet-markercluster-1.0.5/leaflet.markercluster.js"></script><script src="acoustic_telemetry_files/leaflet-markercluster-1.0.5/leaflet.markercluster.freezable.js"></script><script src="acoustic_telemetry_files/leaflet-markercluster-1.0.5/leaflet.markercluster.layersupport.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Explore acoustic telemetry data</h1>
                        <h4 class="author">Damiano Oldoni</h4>
            
            <h4 class="date">2021-10-12</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/inbo/etn/blob/master/vignettes/acoustic_telemetry.Rmd"><code>vignettes/acoustic_telemetry.Rmd</code></a></small>
      <div class="hidden name"><code>acoustic_telemetry.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>In this vignette we show a typical workflow using the etn package to retrieve <strong>acoustic telemetry data</strong> from ETN. We will also use the packages <a href="https://dplyr.tidyverse.org/">dplyr</a> for data exploration, <a href="https://lubridate.tidyverse.org/">lubridate</a> to handle datetime data and <a href="https://rstudio.github.io/leaflet/">leaflet</a> and <a href="https://rstudio.github.io/htmltools/index.html">htmltools</a> for interactive visualizations.</p>
<p>To start, load the etn package:</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">etn</span>)</pre></body></html></div>
<p>And the other packages (with installation if necessary):</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="no">other_pkgs</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"dplyr"</span>, <span class="st">"lubridate"</span>, <span class="st">"leaflet"</span>, <span class="st">"htmltools"</span>)

<span class="co"># install missing packages</span>
<span class="no">pkgs_to_install</span> <span class="kw">&lt;-</span> <span class="no">other_pkgs</span>[!<span class="no">other_pkgs</span> <span class="kw">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span>(<span class="fu"><a href="https://rdrr.io/r/utils/installed.packages.html">installed.packages</a></span>())]
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="no">pkgs_to_install</span>)

<span class="co"># load packages</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">dplyr</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">lubridate</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">leaflet</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">htmltools</span>)</pre></body></html></div>
<p>Connect with your user credentials (as received by VLIZ) to the database. To not expose such confidential information, you could opt to <a href="https://db.rstudio.com/best-practices/managing-credentials/#use-environment-variables">use environment variables</a>:</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="no">con</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/connect_to_etn.html">connect_to_etn</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html">Sys.getenv</a></span>(<span class="st">"userid"</span>), <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html">Sys.getenv</a></span>(<span class="st">"pwd"</span>))
<span class="co"># This is the default, so you could also use connect_to_etn()</span></pre></body></html></div>
<p>Using <code>con</code> as variable to store the collection is not mandatory, but it makes your life much easier as <code>con</code> is the default value of the argument <code>connection</code>, present in every other function of this package.</p>
</div>
<div id="select-projects-of-interest" class="section level2">
<h2 class="hasAnchor">
<a href="#select-projects-of-interest" class="anchor"></a>Select project(s) of interest</h2>
<p>A researcher typically works in the context of one or more <em>animal projects</em>. As the project names are not easy to remember, it is always good to start by an overview of all projects we have access to:</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="no">all_my_projects</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_animal_projects.html">get_animal_projects</a></span>()</pre></body></html></div>
<p>Show a preview:</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">all_my_projects</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="fl">10</span>)</pre></body></html></div>
<pre><code>## # A tibble: 10 × 11
##    project_id project_code  project_type telemetry_type project_name  start_date
##         &lt;int&gt; &lt;chr&gt;         &lt;chr&gt;        &lt;chr&gt;          &lt;chr&gt;         &lt;date&gt;    
##  1        793 2004_Gudena   animal       Acoustic       2004_Gudena   2004-01-01
##  2         16 2010_phd_reu… animal       Acoustic       2010_phd_reu… 2010-08-01
##  3        841 2010_phd_reu… animal       Acoustic       2010_phd_reu… 2010-08-01
##  4        760 2011_Loire    animal       Acoustic       2011_Loire    2011-11-11
##  5         20 2011_rivierp… animal       Acoustic       2011 Rivierp… 2011-01-01
##  6        754 2011_Warnow   animal       Acoustic       2011_Warnow   2011-06-01
##  7         15 2012_leopold… animal       Acoustic       2012 Leopold… 2012-01-01
##  8         18 2013_albertk… animal       Acoustic       2013 Albertk… 2013-10-10
##  9        757 2013_Foyle    animal       Acoustic       2013_Foyle    2013-07-01
## 10         21 2014_demer    animal       Acoustic       2014 Demer    2014-04-10
## # … with 5 more variables: end_date &lt;date&gt;, latitude &lt;dbl&gt;, longitude &lt;dbl&gt;,
## #   moratorium &lt;chr&gt;, imis_dataset_id &lt;int&gt;</code></pre>
<p>If you know the <code>project code</code> already and you are just interested to get more information about it, you can specify it in the <code><a href="../reference/get_animal_projects.html">get_animal_projects()</a></code> function directly:</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="no">projects_code</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"2014_demer"</span>, <span class="st">"2015_dijle"</span>)
<span class="no">projects_study</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_animal_projects.html">get_animal_projects</a></span>(<span class="kw">animal_project_code</span> <span class="kw">=</span> <span class="no">projects_code</span>)
<span class="no">projects_study</span></pre></body></html></div>
<pre><code>## # A tibble: 2 × 11
##   project_id project_code project_type telemetry_type project_name start_date
##        &lt;int&gt; &lt;chr&gt;        &lt;chr&gt;        &lt;chr&gt;          &lt;chr&gt;        &lt;date&gt;    
## 1         21 2014_demer   animal       Acoustic       2014 Demer   2014-04-10
## 2         22 2015_dijle   animal       Acoustic       2015 Dijle   2015-04-16
## # … with 5 more variables: end_date &lt;date&gt;, latitude &lt;dbl&gt;, longitude &lt;dbl&gt;,
## #   moratorium &lt;chr&gt;, imis_dataset_id &lt;int&gt;</code></pre>
<p>This is exactly the same as retrieving all projects first and filtering them afterwards based on column <code>project_code</code>:</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="no">all_my_projects</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="no">project_code</span> <span class="kw">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="no">projects_code</span>))</pre></body></html></div>
<pre><code>## # A tibble: 2 × 11
##   project_id project_code project_type telemetry_type project_name start_date
##        &lt;int&gt; &lt;chr&gt;        &lt;chr&gt;        &lt;chr&gt;          &lt;chr&gt;        &lt;date&gt;    
## 1         21 2014_demer   animal       Acoustic       2014 Demer   2014-04-10
## 2         22 2015_dijle   animal       Acoustic       2015 Dijle   2015-04-16
## # … with 5 more variables: end_date &lt;date&gt;, latitude &lt;dbl&gt;, longitude &lt;dbl&gt;,
## #   moratorium &lt;chr&gt;, imis_dataset_id &lt;int&gt;</code></pre>
<p>To list all available animal project codes as a vector, you can use <code><a href="../reference/list_animal_project_codes.html">list_animal_project_codes()</a></code>, one of the etn functions in the <a href="https://inbo.github.io/etn/reference/index.html#section-list-parameter-options"><code>list_*</code> family</a>:</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="fu"><a href="../reference/list_animal_project_codes.html">list_animal_project_codes</a></span>() <span class="kw">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="fl">10</span>)</pre></body></html></div>
<pre><code>##  [1] "2004_Gudena"           "2010_phd_reubens"      "2010_phd_reubens_sync"
##  [4] "2011_Loire"            "2011_rivierprik"       "2011_Warnow"          
##  [7] "2012_leopoldkanaal"    "2013_albertkanaal"     "2013_Foyle"           
## [10] "2014_demer"</code></pre>
</div>
<div id="animals" class="section level2">
<h2 class="hasAnchor">
<a href="#animals" class="anchor"></a>Animals</h2>
<p>By using <code><a href="../reference/get_animals.html">get_animals()</a></code> you can retrieve information about each animal (<code>animal_id</code>), such as scientific name, length, capture/release date and location, and the attached tag(s) (<code>tag_serial_number</code>):</p>
<div class="sourceCode" id="cb13"><html><body><pre class="r"><span class="no">animals</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_animals.html">get_animals</a></span>(<span class="kw">animal_project_code</span> <span class="kw">=</span> <span class="no">projects_code</span>)
<span class="no">animals</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="fl">10</span>)</pre></body></html></div>
<pre><code>## # A tibble: 10 × 66
##    animal_id animal_project_code tag_serial_number tag_type tag_subtype
##        &lt;int&gt; &lt;chr&gt;               &lt;chr&gt;             &lt;chr&gt;    &lt;chr&gt;      
##  1       304 2014_demer          1187449           acoustic animal     
##  2       384 2014_demer          1157781           acoustic animal     
##  3       385 2014_demer          1157782           acoustic animal     
##  4       386 2014_demer          1157783           acoustic animal     
##  5       305 2014_demer          1187450           acoustic animal     
##  6       383 2014_demer          1157780           acoustic animal     
##  7       369 2014_demer          1171781           acoustic animal     
##  8       370 2014_demer          1171782           acoustic animal     
##  9       365 2014_demer          1171775           acoustic animal     
## 10       366 2014_demer          1171776           acoustic animal     
## # … with 61 more variables: acoustic_tag_id &lt;chr&gt;,
## #   acoustic_tag_id_alternative &lt;chr&gt;, scientific_name &lt;chr&gt;,
## #   common_name &lt;chr&gt;, aphia_id &lt;int&gt;, animal_label &lt;chr&gt;,
## #   animal_nickname &lt;chr&gt;, tagger &lt;chr&gt;, capture_date_time &lt;dttm&gt;,
## #   capture_location &lt;chr&gt;, capture_latitude &lt;dbl&gt;, capture_longitude &lt;dbl&gt;,
## #   capture_method &lt;chr&gt;, capture_depth &lt;chr&gt;,
## #   capture_temperature_change &lt;chr&gt;, release_date_time &lt;dttm&gt;, …</code></pre>
<p>What species and how many individuals are tracked for the projects <code>2014_demer</code> and <code>2015_dijle</code>?</p>
<div class="sourceCode" id="cb15"><html><body><pre class="r"><span class="no">animals</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span>(<span class="no">scientific_name</span>)</pre></body></html></div>
<pre><code>## # A tibble: 7 × 2
##   scientific_name        n
##   &lt;chr&gt;              &lt;int&gt;
## 1 Anguilla anguilla      1
## 2 Cyprinus carpio        2
## 3 Petromyzon marinus     2
## 4 Platichthys flesus     8
## 5 Rutilus rutilus        6
## 6 Silurus glanis        20
## 7 Squalius cephalus      3</code></pre>
</div>
<div id="detections" class="section level2">
<h2 class="hasAnchor">
<a href="#detections" class="anchor"></a>Detections</h2>
<p>Let’s say we are interested in the tracking data of Wels catfish (<em>Silurus glanis</em>) in 2014. You can retrieve the detection history using <code><a href="../reference/get_acoustic_detections.html">get_acoustic_detections()</a></code>:</p>
<div class="sourceCode" id="cb17"><html><body><pre class="r"><span class="no">detections_silurus</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_acoustic_detections.html">get_acoustic_detections</a></span>(
  <span class="kw">animal_project_code</span> <span class="kw">=</span> <span class="no">projects_code</span>,
  <span class="kw">start_date</span> <span class="kw">=</span> <span class="st">"2014-01-01"</span>,
  <span class="kw">end_date</span> <span class="kw">=</span> <span class="st">"2014-12-31"</span>,
  <span class="kw">scientific_name</span> <span class="kw">=</span> <span class="st">"Silurus glanis"</span>
)</pre></body></html></div>
<p>Preview:</p>
<div class="sourceCode" id="cb18"><html><body><pre class="r"><span class="no">detections_silurus</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="fl">10</span>)</pre></body></html></div>
<pre><code>## # A tibble: 10 × 20
##    detection_id date_time           tag_serial_number acoustic_tag_id
##           &lt;int&gt; &lt;dttm&gt;              &lt;chr&gt;             &lt;chr&gt;          
##  1     22402411 2014-05-26 21:49:00 1171775           A69-1601-26529 
##  2     22207337 2014-05-26 21:49:20 1171775           A69-1601-26529 
##  3     20620757 2014-05-26 22:00:00 1171775           A69-1601-26529 
##  4     21701322 2014-05-26 22:00:08 1171775           A69-1601-26529 
##  5     20604027 2014-05-26 22:08:00 1171775           A69-1601-26529 
##  6     21283233 2014-05-26 22:08:12 1171775           A69-1601-26529 
##  7     22131424 2014-05-26 22:14:00 1171775           A69-1601-26529 
##  8     22454253 2014-05-26 22:14:24 1171775           A69-1601-26529 
##  9     22402759 2014-05-26 22:20:00 1171775           A69-1601-26529 
## 10     21751235 2014-05-26 22:20:19 1171775           A69-1601-26529 
## # … with 16 more variables: animal_project_code &lt;chr&gt;, animal_id &lt;int&gt;,
## #   scientific_name &lt;chr&gt;, acoustic_project_code &lt;chr&gt;, receiver_id &lt;chr&gt;,
## #   station_name &lt;chr&gt;, deploy_latitude &lt;dbl&gt;, deploy_longitude &lt;dbl&gt;,
## #   sensor_value &lt;dbl&gt;, sensor_unit &lt;chr&gt;, sensor2_value &lt;dbl&gt;,
## #   sensor2_unit &lt;chr&gt;, signal_to_noise_ratio &lt;int&gt;, source_file &lt;chr&gt;,
## #   qc_flag &lt;chr&gt;, deployment_id &lt;int&gt;</code></pre>
<p>Which individuals have been detected (<code>animal_id</code>) and in which period?</p>
<div class="sourceCode" id="cb20"><html><body><pre class="r"><span class="no">detections_silurus_period</span> <span class="kw">&lt;-</span>
  <span class="no">detections_silurus</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="kw">date</span> <span class="kw">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/date.html">date</a></span>(<span class="no">date_time</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(<span class="no">animal_id</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span>(
    <span class="kw">start</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span>(<span class="no">date</span>),
    <span class="kw">end</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span>(<span class="no">date</span>)
  )
<span class="no">detections_silurus_period</span></pre></body></html></div>
<pre><code>## # A tibble: 9 × 3
##   animal_id start      end       
##       &lt;int&gt; &lt;date&gt;     &lt;date&gt;    
## 1       365 2014-05-26 2014-11-16
## 2       366 2014-05-26 2014-09-22
## 3       367 2014-06-18 2014-06-19
## 4       368 2014-05-26 2014-09-01
## 5       369 2014-05-21 2014-07-01
## 6       370 2014-05-20 2014-11-16
## 7       384 2014-04-24 2014-04-26
## 8       385 2014-04-24 2014-12-19
## 9       386 2014-04-24 2014-12-28</code></pre>
<p>Notice we group by <code>animal_id</code>, the unique identifier of the fish. However, if the fish has only been tagged once (as typically occurs), we could use <code>acoustic_tag_id</code> as well, i.e. the identifier picked up by acoustic receivers:</p>
<div class="sourceCode" id="cb22"><html><body><pre class="r"><span class="no">detections_silurus</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="kw">date</span> <span class="kw">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/date.html">date</a></span>(<span class="no">date_time</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(<span class="no">acoustic_tag_id</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span>(
    <span class="kw">start</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span>(<span class="no">date</span>),
    <span class="kw">end</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span>(<span class="no">date</span>)
  )</pre></body></html></div>
<pre><code>## # A tibble: 9 × 3
##   acoustic_tag_id start      end       
##   &lt;chr&gt;           &lt;date&gt;     &lt;date&gt;    
## 1 A69-1601-26529  2014-05-26 2014-11-16
## 2 A69-1601-26530  2014-05-26 2014-09-22
## 3 A69-1601-26531  2014-06-18 2014-06-19
## 4 A69-1601-26534  2014-05-26 2014-09-01
## 5 A69-1601-26535  2014-05-21 2014-07-01
## 6 A69-1601-26536  2014-05-20 2014-11-16
## 7 A69-1601-28296  2014-04-24 2014-04-26
## 8 A69-1601-28297  2014-04-24 2014-12-19
## 9 A69-1601-28298  2014-04-24 2014-12-28</code></pre>
<p>We can also get the tracking duration of each fish:</p>
<div class="sourceCode" id="cb24"><html><body><pre class="r"><span class="no">detections_silurus_duration</span> <span class="kw">&lt;-</span>
  <span class="no">detections_silurus</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(<span class="no">animal_id</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span>(<span class="kw">duration</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span>(<span class="no">date_time</span>) - <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span>(<span class="no">date_time</span>))
<span class="no">detections_silurus_duration</span></pre></body></html></div>
<pre><code>## # A tibble: 9 × 2
##   animal_id duration       
##       &lt;int&gt; &lt;drtn&gt;         
## 1       365 173.143345 days
## 2       366 118.459780 days
## 3       367   1.589421 days
## 4       368  98.322998 days
## 5       369  41.792720 days
## 6       370 179.210486 days
## 7       384   1.435150 days
## 8       385 238.517766 days
## 9       386 248.323808 days</code></pre>
<p>How many times has an individual has been detected?</p>
<div class="sourceCode" id="cb26"><html><body><pre class="r"><span class="no">detections_silurus</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(<span class="no">animal_id</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span>()</pre></body></html></div>
<pre><code>## # A tibble: 9 × 2
## # Groups:   animal_id [9]
##   animal_id     n
##       &lt;int&gt; &lt;int&gt;
## 1       365  4872
## 2       366  2778
## 3       367   497
## 4       368  7690
## 5       369  1183
## 6       370  4462
## 7       384  2563
## 8       385 29068
## 9       386 18478</code></pre>
</div>
<div id="stations" class="section level2">
<h2 class="hasAnchor">
<a href="#stations" class="anchor"></a>Stations</h2>
<p>At how many detection stations have the individuals been detected?</p>
<div class="sourceCode" id="cb28"><html><body><pre class="r"><span class="no">detections_silurus</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(<span class="no">animal_id</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span>(<span class="no">station_name</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span>()</pre></body></html></div>
<pre><code>## # A tibble: 9 × 2
## # Groups:   animal_id [9]
##   animal_id     n
##       &lt;int&gt; &lt;int&gt;
## 1       365    16
## 2       366     9
## 3       367     1
## 4       368    23
## 5       369     9
## 6       370    18
## 7       384     1
## 8       385    18
## 9       386    15</code></pre>
<p>Which stations have been involved?</p>
<div class="sourceCode" id="cb30"><html><body><pre class="r"><span class="no">stations_silurus</span> <span class="kw">&lt;-</span>
  <span class="no">detections_silurus</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="no">station_name</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>()
<span class="no">stations_silurus</span></pre></body></html></div>
<pre><code>## # A tibble: 23 × 1
##    station_name
##    &lt;chr&gt;       
##  1 de-8        
##  2 de-9        
##  3 de-7        
##  4 de-10       
##  5 de-12       
##  6 de-14       
##  7 de-14a      
##  8 de-5        
##  9 de-11       
## 10 de-13       
## # … with 13 more rows</code></pre>
<p>Notice how a detection station can be linked to multiple deployments:</p>
<div class="sourceCode" id="cb32"><html><body><pre class="r"><span class="no">detections_silurus</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span>(<span class="no">station_name</span>, <span class="no">deployment_id</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(<span class="no">station_name</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">add_tally</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(<span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span>(<span class="no">n</span>))</pre></body></html></div>
<pre><code>## # A tibble: 33 × 3
## # Groups:   station_name [23]
##    station_name deployment_id     n
##    &lt;chr&gt;                &lt;int&gt; &lt;int&gt;
##  1 de-12                 2938     3
##  2 de-12                 1656     3
##  3 de-12                 1470     3
##  4 de-8                  1427     2
##  5 de-9                  1437     2
##  6 de-7                  1378     2
##  7 de-14                 1433     2
##  8 de-14a                1431     2
##  9 de-3                  2869     2
## 10 de-3                  1381     2
## # … with 23 more rows</code></pre>
<p>Sometimes it’s interesting to know the number of detections per station:</p>
<div class="sourceCode" id="cb34"><html><body><pre class="r"><span class="no">n_detect_station</span> <span class="kw">&lt;-</span>
  <span class="no">detections_silurus</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(<span class="no">station_name</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span>()
<span class="no">n_detect_station</span></pre></body></html></div>
<pre><code>## # A tibble: 23 × 2
## # Groups:   station_name [23]
##    station_name     n
##    &lt;chr&gt;        &lt;int&gt;
##  1 de-1           368
##  2 de-10         1681
##  3 de-11          163
##  4 de-12         4203
##  5 de-13          166
##  6 de-14        13353
##  7 de-14a        6604
##  8 de-16          591
##  9 de-18          148
## 10 de-19          650
## # … with 13 more rows</code></pre>
<p>It’s also interesting to know the number of unique individuals per station:</p>
<div class="sourceCode" id="cb36"><html><body><pre class="r"><span class="no">n_silurus_station</span> <span class="kw">&lt;-</span>
  <span class="no">detections_silurus</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span>(<span class="no">station_name</span>, <span class="no">animal_id</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(<span class="no">station_name</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span>()
<span class="no">n_silurus_station</span></pre></body></html></div>
<pre><code>## # A tibble: 23 × 2
## # Groups:   station_name [23]
##    station_name     n
##    &lt;chr&gt;        &lt;int&gt;
##  1 de-1             3
##  2 de-10            6
##  3 de-11            4
##  4 de-12            5
##  5 de-13            4
##  6 de-14            6
##  7 de-14a           6
##  8 de-16            4
##  9 de-18            3
## 10 de-19            5
## # … with 13 more rows</code></pre>
</div>
<div id="acoustic-tags" class="section level2">
<h2 class="hasAnchor">
<a href="#acoustic-tags" class="anchor"></a>Acoustic tags</h2>
<p>To get more information about the tags involved in <code>detections_silurus</code>, you can use the function <code>get_tags</code>, which returns tag related information such as serial number, manufacturer, model, and frequency:</p>
<div class="sourceCode" id="cb38"><html><body><pre class="r"><span class="no">tags_id</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span>(<span class="no">detections_silurus</span>$<span class="no">acoustic_tag_id</span>)
<span class="no">tags_silurus</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_tags.html">get_tags</a></span>(<span class="kw">acoustic_tag_id</span> <span class="kw">=</span> <span class="no">tags_id</span>)
<span class="no">tags_silurus</span></pre></body></html></div>
<pre><code>## # A tibble: 9 × 49
##   tag_serial_number tag_type tag_subtype sensor_type acoustic_tag_id
##   &lt;chr&gt;             &lt;chr&gt;    &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;          
## 1 1157781           acoustic animal      &lt;NA&gt;        A69-1601-28296 
## 2 1157782           acoustic animal      &lt;NA&gt;        A69-1601-28297 
## 3 1157783           acoustic animal      &lt;NA&gt;        A69-1601-28298 
## 4 1171775           acoustic animal      &lt;NA&gt;        A69-1601-26529 
## 5 1171776           acoustic animal      &lt;NA&gt;        A69-1601-26530 
## 6 1171777           acoustic animal      &lt;NA&gt;        A69-1601-26531 
## 7 1171780           acoustic animal      &lt;NA&gt;        A69-1601-26534 
## 8 1171781           acoustic animal      &lt;NA&gt;        A69-1601-26535 
## 9 1171782           acoustic animal      &lt;NA&gt;        A69-1601-26536 
## # … with 44 more variables: acoustic_tag_id_alternative &lt;chr&gt;,
## #   manufacturer &lt;chr&gt;, model &lt;chr&gt;, frequency &lt;chr&gt;, status &lt;chr&gt;,
## #   activation_date &lt;dttm&gt;, battery_estimated_life &lt;chr&gt;,
## #   battery_estimated_end_date &lt;dttm&gt;, sensor_slope &lt;dbl&gt;,
## #   sensor_intercept &lt;dbl&gt;, sensor_range &lt;chr&gt;, sensor_range_min &lt;dbl&gt;,
## #   sensor_range_max &lt;dbl&gt;, sensor_resolution &lt;dbl&gt;, sensor_unit &lt;chr&gt;,
## #   sensor_accuracy &lt;dbl&gt;, sensor_transmit_ratio &lt;int&gt;, …</code></pre>
<p>You can also retrieve such information by <code>tag_serial_number</code>:</p>
<div class="sourceCode" id="cb40"><html><body><pre class="r"><span class="no">tags_serial</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span>(<span class="no">detections_silurus</span>$<span class="no">tag_serial_number</span>)
<span class="no">tags_silurus</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_tags.html">get_tags</a></span>(<span class="kw">tag_serial_number</span> <span class="kw">=</span> <span class="no">tags_serial</span>)
<span class="no">tags_silurus</span></pre></body></html></div>
<pre><code>## # A tibble: 9 × 49
##   tag_serial_number tag_type tag_subtype sensor_type acoustic_tag_id
##   &lt;chr&gt;             &lt;chr&gt;    &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;          
## 1 1157781           acoustic animal      &lt;NA&gt;        A69-1601-28296 
## 2 1157782           acoustic animal      &lt;NA&gt;        A69-1601-28297 
## 3 1157783           acoustic animal      &lt;NA&gt;        A69-1601-28298 
## 4 1171775           acoustic animal      &lt;NA&gt;        A69-1601-26529 
## 5 1171776           acoustic animal      &lt;NA&gt;        A69-1601-26530 
## 6 1171777           acoustic animal      &lt;NA&gt;        A69-1601-26531 
## 7 1171780           acoustic animal      &lt;NA&gt;        A69-1601-26534 
## 8 1171781           acoustic animal      &lt;NA&gt;        A69-1601-26535 
## 9 1171782           acoustic animal      &lt;NA&gt;        A69-1601-26536 
## # … with 44 more variables: acoustic_tag_id_alternative &lt;chr&gt;,
## #   manufacturer &lt;chr&gt;, model &lt;chr&gt;, frequency &lt;chr&gt;, status &lt;chr&gt;,
## #   activation_date &lt;dttm&gt;, battery_estimated_life &lt;chr&gt;,
## #   battery_estimated_end_date &lt;dttm&gt;, sensor_slope &lt;dbl&gt;,
## #   sensor_intercept &lt;dbl&gt;, sensor_range &lt;chr&gt;, sensor_range_min &lt;dbl&gt;,
## #   sensor_range_max &lt;dbl&gt;, sensor_resolution &lt;dbl&gt;, sensor_unit &lt;chr&gt;,
## #   sensor_accuracy &lt;dbl&gt;, sensor_transmit_ratio &lt;int&gt;, …</code></pre>
<p>However, keep in mind that there is a fundamental difference between the arguments <code>acoustic_tag_id</code> and <code>tag_serial_number</code>: the <code>tag_serial_number</code> identifies the <em>device</em>, which could contain multiple tags or sensors and thus multiple <code>acoustic_tag_id</code>.</p>
<p>All possible <code>acoustic_tag_id</code> can be retrieved with the correspondent <code>list_*</code> function:</p>
<div class="sourceCode" id="cb42"><html><body><pre class="r"><span class="fu"><a href="../reference/list_acoustic_tag_ids.html">list_acoustic_tag_ids</a></span>() <span class="kw">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="fl">10</span>)</pre></body></html></div>
<pre><code>##  [1] "416kHz-485"  "416kHz-956"  "416kHz-1141" "416kHz-1164" "416kHz-1277"
##  [6] "416kHz-1935" "416kHz-2066" "416kHz-2219" "416kHz-2228" "416kHz-2248"</code></pre>
</div>
<div id="acoustic-network-projects" class="section level2">
<h2 class="hasAnchor">
<a href="#acoustic-network-projects" class="anchor"></a>Acoustic network projects</h2>
<p>The detection of Wels catfishes has been possible thanks to one or more acoustic network projects, mentioned in field <code>acoustic_project_code</code>:</p>
<div class="sourceCode" id="cb44"><html><body><pre class="r"><span class="no">networks_names</span> <span class="kw">&lt;-</span> <span class="no">detections_silurus</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span>(<span class="no">acoustic_project_code</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span>()
<span class="no">networks_names</span></pre></body></html></div>
<pre><code>## [1] "demer"      "zeeschelde"</code></pre>
<p>To get more information about these acoustic networks, you can use function <code><a href="../reference/get_acoustic_projects.html">get_acoustic_projects()</a></code></p>
<div class="sourceCode" id="cb46"><html><body><pre class="r"><span class="no">networks</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_acoustic_projects.html">get_acoustic_projects</a></span>(<span class="kw">acoustic_project_code</span> <span class="kw">=</span> <span class="no">networks_names</span>)
<span class="no">networks</span></pre></body></html></div>
<pre><code>## # A tibble: 2 × 11
##   project_id project_code project_type telemetry_type project_name start_date
##        &lt;int&gt; &lt;chr&gt;        &lt;chr&gt;        &lt;chr&gt;          &lt;chr&gt;        &lt;date&gt;    
## 1          7 demer        acoustic     Acoustic       Demer        2014-04-10
## 2          5 zeeschelde   acoustic     Acoustic       Zeeschelde   2014-04-10
## # … with 5 more variables: end_date &lt;date&gt;, latitude &lt;dbl&gt;, longitude &lt;dbl&gt;,
## #   moratorium &lt;chr&gt;, imis_dataset_id &lt;int&gt;</code></pre>
<p>You can retrieve the full list of acoustic network projects with the correspondent <code>list_*</code> function:</p>
<div class="sourceCode" id="cb48"><html><body><pre class="r"><span class="fu"><a href="../reference/list_acoustic_project_codes.html">list_acoustic_project_codes</a></span>() <span class="kw">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="fl">10</span>)</pre></body></html></div>
<pre><code>##  [1] "2004_Gudena"              "2011_Loire"              
##  [3] "2011_Warnow"              "2013_Foyle"              
##  [5] "2013_Maas"                "2014_Frome"              
##  [7] "2014_Nene"                "2015_PhD_Gutmann_Roberts"
##  [9] "2016_Diaccia_Botrona"     "2017_Fremur"</code></pre>
</div>
<div id="acoustic-deployments" class="section level2">
<h2 class="hasAnchor">
<a href="#acoustic-deployments" class="anchor"></a>Acoustic deployments</h2>
<p>You can retrieve deployment information related to the networks in <code>networks_names</code> by using <code><a href="../reference/get_acoustic_deployments.html">get_acoustic_deployments()</a></code> function:</p>
<div class="sourceCode" id="cb50"><html><body><pre class="r"><span class="no">deployments</span> <span class="kw">&lt;-</span><span class="fu"><a href="../reference/get_acoustic_deployments.html">get_acoustic_deployments</a></span>(<span class="kw">acoustic_project_code</span> <span class="kw">=</span> <span class="no">networks_names</span>)
<span class="no">deployments</span></pre></body></html></div>
<pre><code>## # A tibble: 371 × 38
##    deployment_id receiver_id acoustic_project_code station_name station_descrip…
##            &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;                 &lt;chr&gt;        &lt;chr&gt;           
##  1          1424 VR2W-122350 demer                 de-1         fietsersbrug aa…
##  2          1658 VR2W-122345 demer                 de-2         Rommelaar       
##  3          1478 VR2W-122325 demer                 de-2         rommelaar       
##  4          1661 VR2W-122344 demer                 de-3         Messelbroek     
##  5          1381 VR2W-122339 demer                 de-3         Messelbroek     
##  6          2869 VR2W-122339 demer                 de-3         Messelbroek     
##  7          1662 VR2W-122323 demer                 de-4         Testelt         
##  8          1425 VR2W-122337 demer                 de-5         SO_ZICHEM_DEMER 
##  9          1663 VR2W-122341 demer                 de-6         SA_RIF_LODEMER  
## 10          1378 VR2W-122320 demer                 de-7         de-7            
## # … with 361 more rows, and 33 more variables: station_manager &lt;chr&gt;,
## #   deploy_date_time &lt;dttm&gt;, deploy_latitude &lt;dbl&gt;, deploy_longitude &lt;dbl&gt;,
## #   intended_latitude &lt;dbl&gt;, intended_longitude &lt;dbl&gt;, mooring_type &lt;chr&gt;,
## #   bottom_depth &lt;chr&gt;, riser_length &lt;chr&gt;, deploy_depth &lt;chr&gt;,
## #   battery_installation_date &lt;dttm&gt;, battery_estimated_end_date &lt;dttm&gt;,
## #   activation_date_time &lt;dttm&gt;, recover_date_time &lt;dttm&gt;,
## #   recover_latitude &lt;dbl&gt;, recover_longitude &lt;dbl&gt;, …</code></pre>
<p>These are the deployments of the acoustic receivers involved in <code>detections_silurus</code>:</p>
<div class="sourceCode" id="cb52"><html><body><pre class="r"><span class="no">deploys_silurus</span> <span class="kw">&lt;-</span>
  <span class="no">detections_silurus</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span>(<span class="no">receiver_id</span>, <span class="no">deployment_id</span>, <span class="no">station_name</span>)
<span class="no">deploys_silurus</span></pre></body></html></div>
<pre><code>## # A tibble: 33 × 3
##    receiver_id station_name deployment_id
##    &lt;chr&gt;       &lt;chr&gt;                &lt;int&gt;
##  1 VR2W-122330 de-8                  1427
##  2 VR2W-124070 de-9                  1437
##  3 VR2W-122320 de-7                  1378
##  4 VR2W-124078 de-10                 1428
##  5 VR2W-122367 de-12                 2938
##  6 VR2W-122348 de-14                 1433
##  7 VR2W-124076 de-14a                1431
##  8 VR2W-122337 de-5                  1425
##  9 VR2W-124061 de-11                 1429
## 10 VR2W-122364 de-13                 1432
## # … with 23 more rows</code></pre>
<p>More information about them can be retrieved via <code><a href="../reference/get_acoustic_deployments.html">get_acoustic_deployments()</a></code> function by specifying the <code>receiver_id</code> and <code>station_name</code> arguments and then filtering by <code>deployment_id</code>:</p>
<div class="sourceCode" id="cb54"><html><body><pre class="r"><span class="no">deployments_silurus</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_acoustic_deployments.html">get_acoustic_deployments</a></span>(
  <span class="kw">receiver_id</span> <span class="kw">=</span> <span class="no">deploys_silurus</span>$<span class="no">receiver_id</span>,
  <span class="kw">station_name</span> <span class="kw">=</span> <span class="no">deploys_silurus</span>$<span class="no">station_name</span>
)

<span class="co"># filter on deployment_id</span>
<span class="no">deployments_silurus</span> <span class="kw">&lt;-</span>
  <span class="no">deployments_silurus</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="no">deployment_id</span> <span class="kw">%in%</span> <span class="no">detections_silurus</span>$<span class="no">deployment_id</span>)</pre></body></html></div>
<p>Deployment duration:</p>
<div class="sourceCode" id="cb55"><html><body><pre class="r"><span class="no">deployments_silurus_duration</span> <span class="kw">&lt;-</span>
  <span class="no">deployments_silurus</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="kw">duration</span> <span class="kw">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/as.duration.html">as.duration</a></span>(<span class="no">recover_date_time</span> - <span class="no">deploy_date_time</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="no">deployment_id</span>, <span class="no">station_name</span>, <span class="no">duration</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(<span class="no">deployment_id</span>)
<span class="no">deployments_silurus_duration</span></pre></body></html></div>
<pre><code>## # A tibble: 33 × 3
##    deployment_id station_name duration                
##            &lt;int&gt; &lt;chr&gt;        &lt;Duration&gt;              
##  1          1378 de-7         19706400s (~32.58 weeks)
##  2          1379 s-2a         19440000s (~32.14 weeks)
##  3          1381 de-3         3888000s (~6.43 weeks)  
##  4          1384 de-21        5788800s (~9.57 weeks)  
##  5          1424 de-1         23760000s (~39.29 weeks)
##  6          1425 de-5         24451200s (~40.43 weeks)
##  7          1427 de-8         19706400s (~32.58 weeks)
##  8          1428 de-10        26611200s (~44 weeks)   
##  9          1429 de-11        26611200s (~44 weeks)   
## 10          1431 de-14a       16070400s (~26.57 weeks)
## # … with 23 more rows</code></pre>
<p>Number of days a deployment detected the passage of one or more individuals:</p>
<div class="sourceCode" id="cb57"><html><body><pre class="r"><span class="no">n_active_days_deployments_silurus</span> <span class="kw">&lt;-</span>
  <span class="no">detections_silurus</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="kw">date</span> <span class="kw">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/date.html">date</a></span>(<span class="no">date_time</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span>(<span class="no">deployment_id</span>, <span class="no">station_name</span>, <span class="no">date</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(<span class="no">deployment_id</span>, <span class="no">station_name</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span>(<span class="kw">n_days</span> <span class="kw">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span>(), <span class="kw">.groups</span> <span class="kw">=</span> <span class="st">"drop"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span>()
<span class="no">n_active_days_deployments_silurus</span></pre></body></html></div>
<pre><code>## # A tibble: 33 × 3
##    deployment_id station_name n_days
##            &lt;int&gt; &lt;chr&gt;         &lt;int&gt;
##  1          1378 de-7            125
##  2          1379 s-2a              7
##  3          1381 de-3              5
##  4          1384 de-21            25
##  5          1424 de-1              7
##  6          1425 de-5             48
##  7          1427 de-8            142
##  8          1428 de-10            35
##  9          1429 de-11            15
## 10          1431 de-14a           59
## # … with 23 more rows</code></pre>
<p>Relative detection duration, i.e. number of days with at least one detection divided by deployment duration:</p>
<div class="sourceCode" id="cb59"><html><body><pre class="r"><span class="no">rel_det_duration_silurus</span> <span class="kw">&lt;-</span>
  <span class="no">n_active_days_deployments_silurus</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span>(
    <span class="no">deployments_silurus_duration</span>,
    <span class="kw">by</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"deployment_id"</span>, <span class="st">"station_name"</span>)
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="kw">relative_detection_duration</span> <span class="kw">=</span> <span class="no">n_days</span>*(<span class="fl">24</span>*<span class="fl">60</span>*<span class="fl">60</span>) / <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span>(<span class="no">duration</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="no">deployment_id</span>, <span class="no">station_name</span>, <span class="no">relative_detection_duration</span>)
<span class="no">rel_det_duration_silurus</span></pre></body></html></div>
<pre><code>## # A tibble: 33 × 3
##    deployment_id station_name relative_detection_duration
##            &lt;int&gt; &lt;chr&gt;                              &lt;dbl&gt;
##  1          1378 de-7                              0.548 
##  2          1379 s-2a                              0.0311
##  3          1381 de-3                              0.111 
##  4          1384 de-21                             0.373 
##  5          1424 de-1                              0.0255
##  6          1425 de-5                              0.170 
##  7          1427 de-8                              0.623 
##  8          1428 de-10                             0.114 
##  9          1429 de-11                             0.0487
## 10          1431 de-14a                            0.317 
## # … with 23 more rows</code></pre>
</div>
<div id="data-visualization" class="section level2">
<h2 class="hasAnchor">
<a href="#data-visualization" class="anchor"></a>Data visualization</h2>
<p>Aside standard graphs, the geographical component of telemetry data makes interactive maps particularly useful. The package <code>leaflet</code> is quite popular to create such kind of visualizations.</p>
<p>We can for example create a map of the involved stations showing the station name and the acoustic project code it belongs to as pop-ups. First, we retrieve the coordinates of the stations:</p>
<div class="sourceCode" id="cb61"><html><body><pre class="r"><span class="no">geo_info_stations</span> <span class="kw">&lt;-</span>
  <span class="no">detections_silurus</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span>(
    <span class="no">station_name</span>,
    <span class="no">deploy_latitude</span>,
    <span class="no">deploy_longitude</span>,
    <span class="no">acoustic_project_code</span>
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(<span class="no">station_name</span>)
<span class="no">geo_info_stations</span></pre></body></html></div>
<pre><code>## # A tibble: 23 × 4
##    acoustic_project_code station_name deploy_latitude deploy_longitude
##    &lt;chr&gt;                 &lt;chr&gt;                  &lt;dbl&gt;            &lt;dbl&gt;
##  1 demer                 de-1                    51.0             4.84
##  2 demer                 de-10                   51.0             5.05
##  3 demer                 de-11                   51.0             5.05
##  4 demer                 de-12                   51.0             5.06
##  5 demer                 de-13                   51.0             5.06
##  6 demer                 de-14                   51.0             5.06
##  7 demer                 de-14a                  51.0             5.06
##  8 demer                 de-16                   51.0             5.06
##  9 demer                 de-18                   51.0             5.07
## 10 demer                 de-19                   51.0             5.08
## # … with 13 more rows</code></pre>
<p>To be able to produce the desired map:</p>
<div class="sourceCode" id="cb63"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/leaflet.html">leaflet</a></span>(<span class="no">geo_info_stations</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/map-layers.html">addTiles</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/map-layers.html">addMarkers</a></span>(
    <span class="kw">lng</span> <span class="kw">=</span> ~<span class="no">deploy_longitude</span>,
    <span class="kw">lat</span> <span class="kw">=</span> ~<span class="no">deploy_latitude</span>,
    <span class="kw">popup</span> <span class="kw">=</span> ~<span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"Station: "</span>, <span class="no">station_name</span>, <span class="st">" ("</span>, <span class="no">acoustic_project_code</span>, <span class="st">")"</span>)
  )</pre></body></html></div>
<div id="htmlwidget-3ef26a178b720e3a68eb" style="width:700px;height:432.632880098888px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-3ef26a178b720e3a68eb">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[[50.9851617,50.9916225,50.9922283,50.9911178,50.9918161,50.9902591,50.99004,50.9901667,50.9876189,50.9849358,50.9942609,50.9847044,50.9843681,50.9833902,50.98197,51.0028729,51.0089239,51.0026609,50.9898768,50.9909004,50.991246,50.9912632,51.02032],[4.8410025,5.0542423,5.0549485,5.0574492,5.0578433,5.0602737,5.060056,5.0616675,5.0742895,5.075274,4.8938203,5.0765513,5.0725863,5.0759855,5.0780232,4.9333539,4.9623949,4.9914479,5.0152068,5.0310774,5.0403814,5.049155,3.96965],null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},["Station: de-1 (demer)","Station: de-10 (demer)","Station: de-11 (demer)","Station: de-12 (demer)","Station: de-13 (demer)","Station: de-14 (demer)","Station: de-14a (demer)","Station: de-16 (demer)","Station: de-18 (demer)","Station: de-19 (demer)","Station: de-2 (demer)","Station: de-20 (demer)","Station: de-21 (demer)","Station: de-22 (demer)","Station: de-23 (demer)","Station: de-3 (demer)","Station: de-4 (demer)","Station: de-5 (demer)","Station: de-6 (demer)","Station: de-7 (demer)","Station: de-8 (demer)","Station: de-9 (demer)","Station: s-2a (zeeschelde)"],null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[50.98197,51.02032],"lng":[3.96965,5.0780232]}},"evals":[],"jsHooks":[]}</script><p>We can visualize the number of detections per station, <code>n_detect_station</code>, by joining it with <code>geo_info_stations</code>:</p>
<div class="sourceCode" id="cb64"><html><body><pre class="r"><span class="co"># Create a continuous colour palette function</span>
<span class="no">pal</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/colorNumeric.html">colorNumeric</a></span>(
  <span class="kw">palette</span> <span class="kw">=</span> <span class="st">"viridis"</span>,
  <span class="kw">domain</span> <span class="kw">=</span> <span class="no">n_detect_station</span>$<span class="no">n</span>
)

<span class="no">n_detect_station</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span>(
    <span class="no">geo_info_stations</span>,
    <span class="kw">by</span> <span class="kw">=</span> <span class="st">"station_name"</span>
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/leaflet.html">leaflet</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/map-layers.html">addTiles</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/map-layers.html">addCircleMarkers</a></span>(
    <span class="kw">lng</span> <span class="kw">=</span> ~<span class="no">deploy_longitude</span>,
    <span class="kw">lat</span> <span class="kw">=</span> ~<span class="no">deploy_latitude</span>,
    <span class="kw">radius</span> <span class="kw">=</span> ~<span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span>(<span class="no">n</span>),
    <span class="kw">color</span> <span class="kw">=</span> ~<span class="fu">pal</span>(<span class="no">n</span>),
    <span class="kw">fillOpacity</span> <span class="kw">=</span> <span class="fl">0.8</span>,
    <span class="kw">stroke</span> <span class="kw">=</span> <span class="fl">FALSE</span>,
    <span class="kw">popup</span> <span class="kw">=</span> ~<span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(
      <span class="kw">sep</span> <span class="kw">=</span> <span class="st">"&lt;br/&gt;"</span>,
      <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"Station: "</span>, <span class="no">station_name</span>, <span class="st">" ("</span>, <span class="no">acoustic_project_code</span>, <span class="st">")"</span>),
      <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"# detections: "</span>, <span class="no">n</span>)
    )
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/addLegend.html">addLegend</a></span>(
    <span class="kw">title</span> <span class="kw">=</span> <span class="st">"Detections"</span>,
    <span class="kw">pal</span> <span class="kw">=</span> <span class="no">pal</span>,
    <span class="kw">values</span> <span class="kw">=</span> ~<span class="no">n</span>
  )</pre></body></html></div>
<div id="htmlwidget-2a3c2479abfb2d587e71" style="width:700px;height:432.632880098888px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-2a3c2479abfb2d587e71">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addCircleMarkers","args":[[50.9851617,50.9916225,50.9922283,50.9911178,50.9918161,50.9902591,50.99004,50.9901667,50.9876189,50.9849358,50.9942609,50.9847044,50.9843681,50.9833902,50.98197,51.0028729,51.0089239,51.0026609,50.9898768,50.9909004,50.991246,50.9912632,51.02032],[4.8410025,5.0542423,5.0549485,5.0574492,5.0578433,5.0602737,5.060056,5.0616675,5.0742895,5.075274,4.8938203,5.0765513,5.0725863,5.0759855,5.0780232,4.9333539,4.9623949,4.9914479,5.0152068,5.0310774,5.0403814,5.049155,3.96965],[5.90808293816893,7.42714413340862,5.09375020080676,8.34355383500512,5.11198778835654,9.49949635768396,8.79543080504002,6.3818160174061,4.99721227376411,6.47697236288968,3.61091791264422,4.11087386417331,5.89164421182577,6.28226674689601,6.95272864462487,3.89182029811063,5.98896141688986,7.42892719480227,6.30991827822652,9.52134826973146,9.65605130865287,9.16544760308545,4.75359019110636],null,null,{"interactive":true,"className":"","stroke":false,"color":["#46095C","#482677","#450457","#39568C","#450457","#9DD93B","#287D8E","#470E61","#450457","#471063","#440154","#440155","#46095C","#470D60","#48196B","#440154","#460A5D","#482677","#470D60","#AADC32","#FDE725","#25AB82","#440356"],"weight":5,"opacity":0.5,"fill":true,"fillColor":["#46095C","#482677","#450457","#39568C","#450457","#9DD93B","#287D8E","#470E61","#450457","#471063","#440154","#440155","#46095C","#470D60","#48196B","#440154","#460A5D","#482677","#470D60","#AADC32","#FDE725","#25AB82","#440356"],"fillOpacity":0.8},null,null,["Station: de-1 (demer)<br/># detections: 368","Station: de-10 (demer)<br/># detections: 1681","Station: de-11 (demer)<br/># detections: 163","Station: de-12 (demer)<br/># detections: 4203","Station: de-13 (demer)<br/># detections: 166","Station: de-14 (demer)<br/># detections: 13353","Station: de-14a (demer)<br/># detections: 6604","Station: de-16 (demer)<br/># detections: 591","Station: de-18 (demer)<br/># detections: 148","Station: de-19 (demer)<br/># detections: 650","Station: de-2 (demer)<br/># detections: 37","Station: de-20 (demer)<br/># detections: 61","Station: de-21 (demer)<br/># detections: 362","Station: de-22 (demer)<br/># detections: 535","Station: de-23 (demer)<br/># detections: 1046","Station: de-3 (demer)<br/># detections: 49","Station: de-4 (demer)<br/># detections: 399","Station: de-5 (demer)<br/># detections: 1684","Station: de-6 (demer)<br/># detections: 550","Station: de-7 (demer)<br/># detections: 13648","Station: de-8 (demer)<br/># detections: 15616","Station: de-9 (demer)<br/># detections: 9561","Station: s-2a (zeeschelde)<br/># detections: 116"],null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addLegend","args":[{"colors":["#440154 , #472D7B 12.6002952692727%, #3A538B 25.4380897361833%, #2B748E 38.2758842030939%, #20928C 51.1136786700045%, #2CB17E 63.9514731369151%, #67CC5C 76.7892676038257%, #B9DE28 89.6270620707363%, #FDE725 "],"labels":["2,000","4,000","6,000","8,000","10,000","12,000","14,000"],"na_color":null,"na_label":"NA","opacity":0.5,"position":"topright","type":"numeric","title":"Detections","extra":{"p_1":0.126002952692727,"p_n":0.896270620707363},"layerId":null,"className":"info legend","group":null}]}],"limits":{"lat":[50.98197,51.02032],"lng":[3.96965,5.0780232]}},"evals":[],"jsHooks":[]}</script><p>In a similar way we can visualize the number of detected individuals per station, <code>n_silurus_station</code>:</p>
<div class="sourceCode" id="cb65"><html><body><pre class="r"><span class="co"># Create a continuous colour palette function</span>
<span class="no">pal</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/colorNumeric.html">colorNumeric</a></span>(
  <span class="kw">palette</span> <span class="kw">=</span> <span class="st">"viridis"</span>,
  <span class="kw">domain</span> <span class="kw">=</span> <span class="no">n_silurus_station</span>$<span class="no">n</span>
)

<span class="no">n_silurus_station</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span>(
    <span class="no">geo_info_stations</span>,
    <span class="kw">by</span> <span class="kw">=</span> <span class="st">"station_name"</span>
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/leaflet.html">leaflet</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/map-layers.html">addTiles</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/map-layers.html">addCircleMarkers</a></span>(
    <span class="kw">lng</span> <span class="kw">=</span> ~<span class="no">deploy_longitude</span>,
    <span class="kw">lat</span> <span class="kw">=</span> ~<span class="no">deploy_latitude</span>,
    <span class="kw">radius</span> <span class="kw">=</span> ~<span class="no">n</span>,
    <span class="kw">color</span> <span class="kw">=</span> ~<span class="fu">pal</span>(<span class="no">n</span>),
    <span class="kw">fillOpacity</span> <span class="kw">=</span> <span class="fl">0.8</span>,
    <span class="kw">stroke</span> <span class="kw">=</span> <span class="fl">FALSE</span>,
    <span class="kw">popup</span> <span class="kw">=</span> ~<span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(
      <span class="kw">sep</span> <span class="kw">=</span> <span class="st">"&lt;br/&gt;"</span>,
      <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"Station: "</span>, <span class="no">station_name</span>, <span class="st">" ("</span>, <span class="no">acoustic_project_code</span>, <span class="st">")"</span>),
      <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"# detected individuals: "</span>, <span class="no">n</span>)
    )
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/addLegend.html">addLegend</a></span>(
    <span class="kw">title</span> <span class="kw">=</span> <span class="st">"Detected individuals"</span>,
    <span class="kw">pal</span> <span class="kw">=</span> <span class="no">pal</span>,
    <span class="kw">values</span> <span class="kw">=</span> ~<span class="no">n</span>
  )</pre></body></html></div>
<div id="htmlwidget-1a6444db36e119149236" style="width:700px;height:432.632880098888px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-1a6444db36e119149236">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addCircleMarkers","args":[[50.9851617,50.9916225,50.9922283,50.9911178,50.9918161,50.9902591,50.99004,50.9901667,50.9876189,50.9849358,50.9942609,50.9847044,50.9843681,50.9833902,50.98197,51.0028729,51.0089239,51.0026609,50.9898768,50.9909004,50.991246,50.9912632,51.02032],[4.8410025,5.0542423,5.0549485,5.0574492,5.0578433,5.0602737,5.060056,5.0616675,5.0742895,5.075274,4.8938203,5.0765513,5.0725863,5.0759855,5.0780232,4.9333539,4.9623949,4.9914479,5.0152068,5.0310774,5.0403814,5.049155,3.96965],[3,6,4,5,4,6,6,4,3,5,3,4,4,4,4,3,3,7,6,7,7,8,4],null,null,{"interactive":true,"className":"","stroke":false,"color":["#440154","#22A884","#414487","#2A788E","#414487","#22A884","#22A884","#414487","#440154","#2A788E","#440154","#414487","#414487","#414487","#414487","#440154","#440154","#7AD151","#22A884","#7AD151","#7AD151","#FDE725","#414487"],"weight":5,"opacity":0.5,"fill":true,"fillColor":["#440154","#22A884","#414487","#2A788E","#414487","#22A884","#22A884","#414487","#440154","#2A788E","#440154","#414487","#414487","#414487","#414487","#440154","#440154","#7AD151","#22A884","#7AD151","#7AD151","#FDE725","#414487"],"fillOpacity":0.8},null,null,["Station: de-1 (demer)<br/># detected individuals: 3","Station: de-10 (demer)<br/># detected individuals: 6","Station: de-11 (demer)<br/># detected individuals: 4","Station: de-12 (demer)<br/># detected individuals: 5","Station: de-13 (demer)<br/># detected individuals: 4","Station: de-14 (demer)<br/># detected individuals: 6","Station: de-14a (demer)<br/># detected individuals: 6","Station: de-16 (demer)<br/># detected individuals: 4","Station: de-18 (demer)<br/># detected individuals: 3","Station: de-19 (demer)<br/># detected individuals: 5","Station: de-2 (demer)<br/># detected individuals: 3","Station: de-20 (demer)<br/># detected individuals: 4","Station: de-21 (demer)<br/># detected individuals: 4","Station: de-22 (demer)<br/># detected individuals: 4","Station: de-23 (demer)<br/># detected individuals: 4","Station: de-3 (demer)<br/># detected individuals: 3","Station: de-4 (demer)<br/># detected individuals: 3","Station: de-5 (demer)<br/># detected individuals: 7","Station: de-6 (demer)<br/># detected individuals: 6","Station: de-7 (demer)<br/># detected individuals: 7","Station: de-8 (demer)<br/># detected individuals: 7","Station: de-9 (demer)<br/># detected individuals: 8","Station: s-2a (zeeschelde)<br/># detected individuals: 4"],null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addLegend","args":[{"colors":["#440154 , #440154 0%, #414487 20%, #2A788E 40%, #22A884 60%, #7AD151 80%, #FDE725 100%, #FDE725 "],"labels":["3","4","5","6","7","8"],"na_color":null,"na_label":"NA","opacity":0.5,"position":"topright","type":"numeric","title":"Detected individuals","extra":{"p_1":0,"p_n":1},"layerId":null,"className":"info legend","group":null}]}],"limits":{"lat":[50.98197,51.02032],"lng":[3.96965,5.0780232]}},"evals":[],"jsHooks":[]}</script><p>We can also make a map of the relative detection duration of the deployments. First, we have to retrieve the deployment geographical coordinates:</p>
<div class="sourceCode" id="cb66"><html><body><pre class="r"><span class="no">geo_info_deploys</span> <span class="kw">&lt;-</span>
  <span class="no">detections_silurus</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span>(
    <span class="no">deployment_id</span>,
    <span class="no">deploy_latitude</span>,
    <span class="no">deploy_longitude</span>,
    <span class="no">station_name</span>,
    <span class="no">acoustic_project_code</span>
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(<span class="no">station_name</span>)
<span class="no">geo_info_deploys</span></pre></body></html></div>
<pre><code>## # A tibble: 33 × 5
##    acoustic_project… station_name deploy_latitude deploy_longitude deployment_id
##    &lt;chr&gt;             &lt;chr&gt;                  &lt;dbl&gt;            &lt;dbl&gt;         &lt;int&gt;
##  1 demer             de-1                    51.0             4.84          1424
##  2 demer             de-10                   51.0             5.05          1428
##  3 demer             de-11                   51.0             5.05          1429
##  4 demer             de-12                   51.0             5.06          2938
##  5 demer             de-12                   51.0             5.06          1656
##  6 demer             de-12                   51.0             5.06          1470
##  7 demer             de-13                   51.0             5.06          1432
##  8 demer             de-14                   51.0             5.06          1433
##  9 demer             de-14                   51.0             5.06          1592
## 10 demer             de-14a                  51.0             5.06          1431
## # … with 23 more rows</code></pre>
<p>We are ready to create the desired map, where we show the deployment ID, the station name and the network project as popups:</p>
<div class="sourceCode" id="cb68"><html><body><pre class="r"><span class="co"># Create a continuous colour palette function</span>
<span class="no">pal</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/colorNumeric.html">colorNumeric</a></span>(
  <span class="kw">palette</span> <span class="kw">=</span> <span class="st">"viridis"</span>,
  <span class="kw">domain</span> <span class="kw">=</span> <span class="no">rel_det_duration_silurus</span>$<span class="no">relative_detection_duration</span>
)

<span class="no">rel_det_duration_silurus</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span>(
    <span class="no">geo_info_deploys</span>,
    <span class="kw">by</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"deployment_id"</span>, <span class="st">"station_name"</span>)
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/leaflet.html">leaflet</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/map-layers.html">addTiles</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/map-layers.html">addCircleMarkers</a></span>(
    <span class="kw">lng</span> <span class="kw">=</span> ~<span class="no">deploy_longitude</span>,
    <span class="kw">lat</span> <span class="kw">=</span> ~<span class="no">deploy_latitude</span>,
    <span class="kw">radius</span> <span class="kw">=</span> ~<span class="fl">100</span>*<span class="no">relative_detection_duration</span>,
    <span class="kw">color</span> <span class="kw">=</span> ~<span class="fu">pal</span>(<span class="no">relative_detection_duration</span>),
    <span class="kw">fillOpacity</span> <span class="kw">=</span> <span class="fl">0.8</span>,
    <span class="kw">stroke</span> <span class="kw">=</span> <span class="fl">FALSE</span>,
    <span class="kw">clusterOptions</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/map-options.html">markerClusterOptions</a></span>(),
    <span class="kw">popup</span> <span class="kw">=</span> ~<span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(
      <span class="kw">sep</span> <span class="kw">=</span> <span class="st">"&lt;br/&gt;"</span>,
      <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"DeploymentID: "</span>, <span class="no">deployment_id</span>),
      <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"Station: "</span>, <span class="no">station_name</span>, <span class="st">" ("</span>, <span class="no">acoustic_project_code</span>, <span class="st">")"</span>),
      <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"# relative detection duration: "</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(<span class="no">relative_detection_duration</span>, <span class="fl">2</span>))
    )
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/addLegend.html">addLegend</a></span>(
    <span class="kw">title</span> <span class="kw">=</span> <span class="st">"Relative detection duration"</span>,
    <span class="kw">pal</span> <span class="kw">=</span> <span class="no">pal</span>,
    <span class="kw">values</span> <span class="kw">=</span> ~<span class="no">relative_detection_duration</span>
  )</pre></body></html></div>
<div id="htmlwidget-b1a40bc878a2603c95f8" style="width:700px;height:432.632880098888px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-b1a40bc878a2603c95f8">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addCircleMarkers","args":[[50.9909004,51.02032,51.0028729,50.9843681,50.9851617,51.0026609,50.991246,50.9916225,50.9922283,50.99004,50.9918161,50.9902591,50.9901667,50.9849358,50.9912632,50.9876189,50.9847044,50.98197,50.9911178,50.9942609,50.99004,50.991246,50.9912632,50.9902591,50.9909004,50.9911178,50.9843681,50.9833902,51.0089239,50.9898768,51.0028729,50.9833902,50.9911178],[5.0310774,3.96965,4.9333539,5.0725863,4.8410025,4.9914479,5.0403814,5.0542423,5.0549485,5.060056,5.0578433,5.0602737,5.0616675,5.075274,5.049155,5.0742895,5.0765513,5.0780232,5.0574492,4.8938203,5.060056,5.0403814,5.049155,5.0602737,5.0310774,5.0574492,5.0725863,5.0759855,4.9623949,5.0152068,4.9333539,5.0759855,5.0574492],[54.8045305078553,3.11111111111111,11.1111111111111,37.3134328358209,2.54545454545455,16.9611307420495,62.2579466569236,11.3636363636364,4.87012987012987,31.7204301075269,4.39121756487026,28.2352941176471,8.76623376623377,5.51948051948052,37.9352926648555,2.71186440677966,3.05084745762712,18.3050847457627,9.09090909090909,2.11640211640212,9.44881889763779,5.2863436123348,5.28052805280528,63.1578947368421,5.2863436123348,6.25,26.0869565217391,18.8405797101449,18.3673469387755,29.8245614035088,4.91803278688525,13.6563876651982,14.4444444444444],null,null,{"interactive":true,"className":"","stroke":false,"color":["#A2DA37","#46075A","#463480","#1FA287","#450457","#3C508B","#F4E61E","#453581","#471265","#228D8D","#470F62","#277F8E","#482878","#481668","#21A585","#450458","#46075A","#39568C","#482979","#440154","#472B7A","#481467","#481467","#FDE725","#481467","#481A6C","#2A768E","#38598C","#39568C","#25858E","#471265","#424086","#414588"],"weight":5,"opacity":0.5,"fill":true,"fillColor":["#A2DA37","#46075A","#463480","#1FA287","#450457","#3C508B","#F4E61E","#453581","#471265","#228D8D","#470F62","#277F8E","#482878","#481668","#21A585","#450458","#46075A","#39568C","#482979","#440154","#472B7A","#481467","#481467","#FDE725","#481467","#481A6C","#2A768E","#38598C","#39568C","#25858E","#471265","#424086","#414588"],"fillOpacity":0.8},{"showCoverageOnHover":true,"zoomToBoundsOnClick":true,"spiderfyOnMaxZoom":true,"removeOutsideVisibleBounds":true,"spiderLegPolylineOptions":{"weight":1.5,"color":"#222","opacity":0.5},"freezeAtZoom":false},null,["DeploymentID: 1378<br/>Station: de-7 (demer)<br/># relative detection duration: 0.55","DeploymentID: 1379<br/>Station: s-2a (zeeschelde)<br/># relative detection duration: 0.03","DeploymentID: 1381<br/>Station: de-3 (demer)<br/># relative detection duration: 0.11","DeploymentID: 1384<br/>Station: de-21 (demer)<br/># relative detection duration: 0.37","DeploymentID: 1424<br/>Station: de-1 (demer)<br/># relative detection duration: 0.03","DeploymentID: 1425<br/>Station: de-5 (demer)<br/># relative detection duration: 0.17","DeploymentID: 1427<br/>Station: de-8 (demer)<br/># relative detection duration: 0.62","DeploymentID: 1428<br/>Station: de-10 (demer)<br/># relative detection duration: 0.11","DeploymentID: 1429<br/>Station: de-11 (demer)<br/># relative detection duration: 0.05","DeploymentID: 1431<br/>Station: de-14a (demer)<br/># relative detection duration: 0.32","DeploymentID: 1432<br/>Station: de-13 (demer)<br/># relative detection duration: 0.04","DeploymentID: 1433<br/>Station: de-14 (demer)<br/># relative detection duration: 0.28","DeploymentID: 1434<br/>Station: de-16 (demer)<br/># relative detection duration: 0.09","DeploymentID: 1436<br/>Station: de-19 (demer)<br/># relative detection duration: 0.06","DeploymentID: 1437<br/>Station: de-9 (demer)<br/># relative detection duration: 0.38","DeploymentID: 1439<br/>Station: de-18 (demer)<br/># relative detection duration: 0.03","DeploymentID: 1440<br/>Station: de-20 (demer)<br/># relative detection duration: 0.03","DeploymentID: 1441<br/>Station: de-23 (demer)<br/># relative detection duration: 0.18","DeploymentID: 1470<br/>Station: de-12 (demer)<br/># relative detection duration: 0.09","DeploymentID: 1478<br/>Station: de-2 (demer)<br/># relative detection duration: 0.02","DeploymentID: 1506<br/>Station: de-14a (demer)<br/># relative detection duration: 0.09","DeploymentID: 1573<br/>Station: de-8 (demer)<br/># relative detection duration: 0.05","DeploymentID: 1588<br/>Station: de-9 (demer)<br/># relative detection duration: 0.05","DeploymentID: 1592<br/>Station: de-14 (demer)<br/># relative detection duration: 0.63","DeploymentID: 1593<br/>Station: de-7 (demer)<br/># relative detection duration: 0.05","DeploymentID: 1656<br/>Station: de-12 (demer)<br/># relative detection duration: 0.06","DeploymentID: 1659<br/>Station: de-21 (demer)<br/># relative detection duration: 0.26","DeploymentID: 1660<br/>Station: de-22 (demer)<br/># relative detection duration: 0.19","DeploymentID: 1662<br/>Station: de-4 (demer)<br/># relative detection duration: 0.18","DeploymentID: 1663<br/>Station: de-6 (demer)<br/># relative detection duration: 0.3","DeploymentID: 2869<br/>Station: de-3 (demer)<br/># relative detection duration: 0.05","DeploymentID: 2933<br/>Station: de-22 (demer)<br/># relative detection duration: 0.14","DeploymentID: 2938<br/>Station: de-12 (demer)<br/># relative detection duration: 0.14"],null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addLegend","args":[{"colors":["#440154 , #472E7C 12.9151459854015%, #355E8D 29.2974452554745%, #25858E 45.6797445255475%, #26AD81 62.0620437956204%, #70CF57 78.4443430656934%, #DCE318 94.8266423357664%, #FDE725 "],"labels":["0.1","0.2","0.3","0.4","0.5","0.6"],"na_color":null,"na_label":"NA","opacity":0.5,"position":"topright","type":"numeric","title":"Relative detection duration","extra":{"p_1":0.129151459854015,"p_n":0.948266423357664},"layerId":null,"className":"info legend","group":null}]}],"limits":{"lat":[50.98197,51.02032],"lng":[3.96965,5.0780232]}},"evals":[],"jsHooks":[]}</script><p>Do you want to add the temporal component to visualize the fish movement? Take a look at the <a href="https://movevis.org/index.html">moveVis</a> package.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://twitter.com/peterdesmet">Peter Desmet</a>, <a href="https://twitter.com/damianozingaro">Damiano Oldoni</a>, <a href="https://twitter.com/SVanHoey">Stijn Van Hoey</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
